{"pages":[{"title":"我是谁","text":"你好, 我是花满楼","link":"/about/index.html"},{"title":"categories","text":"","link":"/categories/index.html"},{"title":"tags","text":"","link":"/tags/index.html"},{"title":"我的学习笔记","text":"Java JS GO C语言 MySQL Linux HTTP RPC 网络 设计模式","link":"/study_notes/index.html"},{"title":"我的读书笔记, 读书时随手记录而已","text":"写给大忙人看的Java核心技术 Linux/UNIX系统编程手册 高性能MySQL 高可用MySQL MySQL技术内幕: SQL编程 MySQL技术内幕: InnoDB存储引擎 Head First设计模式","link":"/book_notes/index.html"}],"posts":[{"title":"细说minikube搭建k8s学习环境","text":"0.准备工作 minikube依赖墙外资源，所以需要准备好shadowsocks, shadowsocks默认监听localhost, 将其改成监听所有网卡(0.0.0.0) 安装virtualbox 安装kubectl 1.minikube尝鲜启动kubernetesminikube start \\--vm-driver=virtualbox \\--docker-env http_proxy=http://192.168.99.1:1087 \\--docker-env https_proxy=http://192.168.99.1:1087 \\--docker-env no_proxy=localhost,127.0.0.1,192.168.0.0/16 访问dashboardminikube dashboard 执行完上面的命令，你就可以到浏览器遛遛你的k8s了 2.minikube是什么现在我们开始真正说说minikube了，minikube是为简化搭建k8s的繁琐过程，让你可以轻松在本地环境搭建起一个单个node的k8s集群，方便学习。 3.安装安装非常简单，在Mac平台，你可以直接下载二进制文件 curl -Lo minikube https://storage.googleapis.com/minikube/releases/v0.27.0/minikube-darwin-amd64 &amp;&amp; chmod +x minikube &amp;&amp; sudo mv minikube /usr/local/bin/ 或者是brew brew cask install minikube 安装好了之后一定记得设置命令补全, 执行如下命令可以看到每个环境的设置方式 minikube completion -h 4.常用命令start 启动一个k8s集群get-k8s-versions 获取可以使用的k8s版本addons 插件管理下面会细说5.插件管理minikube有个子命令addons, 用来管理插件，这里的插件是指一下常用的服务,比如web界面dashboard、日志搜集efk、指标监控heapster等 6.配置网络代理使用minikube启动一个单节点的k8s集群, 实际是在virtualbox里启动了一个linux虚拟机,所以要想k8s可以使用墙外资源，就得给这个虚拟机里的docker设置网络代理, 给docker设置网络代理很简单，给它配置对应的启动参数http_proxy和https_proyx, 但是这里有个问题, docker是在一个虚拟机里，网络代理ss在我们本地电脑上, 是两台独立的机器, 所以docker里配置的代理地址不能是localhost:1087, 而应该是我们本地电脑上的一个IP,比如:192.168.31.126:1987,但是问题又来了, 这个IP是路由器自动分配的, 电脑重新联网后IP会变, 所以得想办法给电脑设置一个固定IP, 网上搜了一圈没有找到如何在Mac电脑上添加虚拟网卡，没有办法了。换个思路，从virtualbox入手, minikube在virtualbox上启动虚拟机时，会设置一个host-only的网络, 所以会添加一个虚拟网卡, 这个网卡的IP地址是192.168.99.1, 一定是这个地址吗，不一定，但是默认是，因为minikube操作virtualbox使用的是docker-machine的driver, 这个网卡默认使用这个地址, 可以在里看到。 7.内部原理我们知道k8s集群至少有api-server,kube-scheduler,kube-controller-manager,kubelet,kube-proxy五个组件和一套etcd组成。那我minikube ssh进入到虚拟机里看看, https://github.com/Unknwon/wuwen.org/issues/20https://blog.samemoment.com/articles/kuberneteshttps://github.com/docker/machine/blob/ab3b7acb9792271dcd349da731150757a9346183/drivers/virtualbox/virtualbox.go#L28","link":"/2018/08/05/minikube/"},{"title":"hexo折腾小记","text":"使用gitment做评论系统","link":"/2018/08/05/hexo/"},{"title":"gitbook折腾小记","text":"使用nodemon","link":"/2018/08/05/gitbook/"},{"title":"安装etcd","text":"准备安装启动验证","link":"/2019/04/26/etcd/install/"}],"tags":[{"name":"minikube","slug":"minikube","link":"/tags/minikube/"},{"name":"kubernetes","slug":"kubernetes","link":"/tags/kubernetes/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"},{"name":"blog","slug":"blog","link":"/tags/blog/"},{"name":"etcd","slug":"etcd","link":"/tags/etcd/"},{"name":"raft","slug":"raft","link":"/tags/raft/"}],"categories":[]}